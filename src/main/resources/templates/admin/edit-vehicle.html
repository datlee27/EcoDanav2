<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${vehicle.vehicleId != null ? 'Edit Vehicle' : 'Add Vehicle'}"></title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100">

<div class="container mx-auto p-8">
    <h1 class="text-2xl font-bold mb-6" th:text="${vehicle.vehicleId != null ? 'Edit Vehicle' : 'Add Vehicle'}"></h1>

    <form th:action="${vehicle.vehicleId != null ? '/admin/vehicles/update' : '/admin/vehicles/add'}" th:object="${vehicle}" method="post" class="bg-white p-6 rounded-lg shadow-md">

        <!-- Hidden Vehicle ID for updates -->
        <input type="hidden" th:if="${vehicle.vehicleId != null}" th:field="*{vehicleId}"/>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Vehicle Model -->
            <div>
                <label for="vehicleModel" class="block text-sm font-medium text-gray-700">Vehicle Model</label>
                <input type="text" id="vehicleModel" th:field="*{vehicleModel}" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" required>
            </div>

            <!-- License Plate -->
            <div>
                <label for="licensePlate" class="block text-sm font-medium text-gray-700">License Plate</label>
                <input type="text" id="licensePlate" th:field="*{licensePlate}" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" required>
            </div>

            <!-- Year Manufactured -->
            <div>
                <label for="yearManufactured" class="block text-sm font-medium text-gray-700">Year Manufactured</label>
                <input type="number" id="yearManufactured" th:field="*{yearManufactured}" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
            </div>

            <!-- Seats -->
            <div>
                <label for="seats" class="block text-sm font-medium text-gray-700">Seats</label>
                <input type="number" id="seats" th:field="*{seats}" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
            </div>

            <!-- Odometer -->
            <div>
                <label for="odometer" class="block text-sm font-medium text-gray-700">Odometer (km)</label>
                <input type="number" id="odometer" th:field="*{odometer}" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
            </div>

            <!-- Battery Capacity -->
            <div>
                <label for="batteryCapacity" class="block text-sm font-medium text-gray-700">Battery Capacity (kWh)</label>
                <input type="text" id="batteryCapacity" th:field="*{batteryCapacity}" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
            </div>

            <!-- Status -->
            <div>
                <label for="status" class="block text-sm font-medium text-gray-700">Status</label>
                <select id="status" th:field="*{status}" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                    <option th:each="s : ${T(com.ecodana.evodanavn1.model.Vehicle.VehicleStatus).values()}" th:value="${s}" th:text="${s}"></option>
                </select>
            </div>

            <!-- Vehicle Type -->
            <div>
                <label for="vehicleType" class="block text-sm font-medium text-gray-700">Vehicle Type</label>
                <select id="vehicleType" th:field="*{vehicleType}" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                    <option th:each="vt : ${T(com.ecodana.evodanavn1.model.Vehicle.VehicleType).values()}" th:value="${vt}" th:text="${vt}"></option>
                </select>
            </div>

            <!-- Category -->
            <div>
                <label for="category" class="block text-sm font-medium text-gray-700">Category</label>
                <select id="category" name="categoryId" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                    <option th:each="cat : ${categories}" th:value="${cat.categoryId}" th:text="${cat.categoryName}" th:selected="${vehicle.category != null and vehicle.category.categoryId == cat.categoryId}"></option>
                </select>
            </div>

            <!-- Transmission Type -->
            <div>
                <label for="transmissionType" class="block text-sm font-medium text-gray-700">Transmission Type</label>
                <select id="transmissionType" name="transmissionTypeId" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                    <option th:each="tt : ${transmissionTypes}" th:value="${tt.transmissionTypeId}" th:text="${tt.typeName}" th:selected="${vehicle.transmissionType != null and vehicle.transmissionType.transmissionTypeId == tt.transmissionTypeId}"></option>
                </select>
            </div>

            <!-- Requires License -->
            <div class="flex items-center">
                <input type="checkbox" id="requiresLicense" th:field="*{requiresLicense}" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                <label for="requiresLicense" class="ml-2 block text-sm text-gray-900">Requires License</label>
            </div>
        </div>

        <!-- Description -->
        <div class="mt-6">
            <label for="description" class="block text-sm font-medium text-gray-700">Description</label>
            <textarea id="description" th:field="*{description}" rows="4" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"></textarea>
        </div>

        <!-- Rental Prices (JSON) -->
        <div class="mt-6">
            <label for="rentalPrices" class="block text-sm font-medium text-gray-700">Rental Prices (JSON)</label>
            <textarea id="rentalPrices" name="rentalPrices" th:text="*{rentalPrices}" rows="3" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm font-mono text-sm focus:ring-blue-500 focus:border-blue-500" placeholder='{"daily": 500000, "weekly": 3000000}'></textarea>
        </div>

        <!-- Image URLs -->
        <div class="mt-6">
            <label for="mainImageUrl" class="block text-sm font-medium text-gray-700">Main Image URL</label>
            <input type="text" id="mainImageUrl" th:field="*{mainImageUrl}" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
        </div>
        <div class="mt-6">
            <label for="imageUrls" class="block text-sm font-medium text-gray-700">Other Image URLs (JSON Array)</label>
            <textarea id="imageUrls" name="imageUrls" th:text="*{imageUrls}" rows="3" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm font-mono text-sm focus:ring-blue-500 focus:border-blue-500" placeholder='["url1.jpg", "url2.jpg"]'></textarea>
        </div>

        <!-- Features (JSON Array) -->
        <div class="mt-6">
            <label for="features" class="block text-sm font-medium text-gray-700">Features (JSON Array)</label>
            <textarea id="features" name="features" th:text="*{features}" rows="3" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm font-mono text-sm focus:ring-blue-500 focus:border-blue-500" placeholder='["GPS", "Bluetooth"]'></textarea>
        </div>

        <!-- Buttons -->
        <div class="mt-8 flex justify-end space-x-4">
            <a href="/admin/vehicles" class="bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300">Cancel</a>
            <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700">Save Vehicle</button>
        </div>
    </form>
</div>

</body>
</html>
