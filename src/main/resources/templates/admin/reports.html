<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/layout :: head}"></head>
<body class="bg-gray-50">
    <div th:replace="~{fragments/nav :: nav}"></div>

    <div class="pt-20 pb-8">
        <div class="max-w-7xl mx-auto px-4">
            <!-- Header -->
            <div class="flex justify-between items-center mb-8">
                <div>
                    <h1 class="text-3xl font-bold text-gray-800">Reports & Analytics</h1>
                    <p class="text-gray-600">Business insights and performance metrics</p>
                </div>
                <div class="flex space-x-3">
                    <button class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-accent transition-colors">
                        <i class="fas fa-download mr-2"></i>Export Report
                    </button>
                    <button class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 transition-colors">
                        <i class="fas fa-calendar mr-2"></i>Date Range
                    </button>
                </div>
            </div>

            <!-- Date Range Filter -->
            <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
                <h3 class="text-lg font-semibold mb-4">Filter by Date Range</h3>
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">From Date</label>
                        <input type="date" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">To Date</label>
                        <input type="date" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Report Type</label>
                        <select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                            <option value="overview">Overview</option>
                            <option value="revenue">Revenue Report</option>
                            <option value="bookings">Bookings Report</option>
                            <option value="vehicles">Vehicles Report</option>
                            <option value="users">Users Report</option>
                        </select>
                    </div>
                    <div class="flex items-end">
                        <button class="w-full bg-primary text-white py-2 rounded-lg hover:bg-accent transition-colors">
                            <i class="fas fa-chart-line mr-2"></i>Generate
                        </button>
                    </div>
                </div>
            </div>

            <!-- Key Metrics -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-600">Total Revenue</p>
                            <p class="text-3xl font-bold text-gray-800" th:text="'$' + ${totalRevenue}">$45,230</p>
                            <p class="text-sm text-green-600 flex items-center mt-1">
                                <i class="fas fa-arrow-up mr-1"></i>
                                +12.5% from last month
                            </p>
                        </div>
                        <div class="w-12 h-12 bg-green-100 text-green-600 rounded-lg flex items-center justify-center">
                            <i class="fas fa-dollar-sign text-xl"></i>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-lg p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-600">Total Bookings</p>
                            <p class="text-3xl font-bold text-gray-800" th:text="${totalBookings}">1,234</p>
                            <p class="text-sm text-green-600 flex items-center mt-1">
                                <i class="fas fa-arrow-up mr-1"></i>
                                +8.2% from last month
                            </p>
                        </div>
                        <div class="w-12 h-12 bg-blue-100 text-blue-600 rounded-lg flex items-center justify-center">
                            <i class="fas fa-calendar-check text-xl"></i>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-lg p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-600">Active Users</p>
                            <p class="text-3xl font-bold text-gray-800" th:text="${activeUsers}">892</p>
                            <p class="text-sm text-green-600 flex items-center mt-1">
                                <i class="fas fa-arrow-up mr-1"></i>
                                +15.3% from last month
                            </p>
                        </div>
                        <div class="w-12 h-12 bg-purple-100 text-purple-600 rounded-lg flex items-center justify-center">
                            <i class="fas fa-users text-xl"></i>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-lg p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-600">Vehicle Utilization</p>
                            <p class="text-3xl font-bold text-gray-800">78%</p>
                            <p class="text-sm text-red-600 flex items-center mt-1">
                                <i class="fas fa-arrow-down mr-1"></i>
                                -2.1% from last month
                            </p>
                        </div>
                        <div class="w-12 h-12 bg-yellow-100 text-yellow-600 rounded-lg flex items-center justify-center">
                            <i class="fas fa-chart-pie text-xl"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Charts Section -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                <!-- Revenue Chart -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-lg font-semibold mb-4">Revenue Trend</h3>
                    <div class="h-64 flex items-center justify-center bg-gray-50 rounded-lg">
                        <div class="text-center">
                            <i class="fas fa-chart-line text-4xl text-gray-400 mb-2"></i>
                            <p class="text-gray-500">Revenue chart will be displayed here</p>
                        </div>
                    </div>
                </div>

                <!-- Bookings Chart -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-lg font-semibold mb-4">Bookings by Status</h3>
                    <div class="h-64 flex items-center justify-center bg-gray-50 rounded-lg">
                        <div class="text-center">
                            <i class="fas fa-chart-pie text-4xl text-gray-400 mb-2"></i>
                            <p class="text-gray-500">Bookings pie chart will be displayed here</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Detailed Reports -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8">
                <!-- Top Vehicles -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-lg font-semibold mb-4">Top Performing Vehicles</h3>
                    <div class="space-y-4">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center">
                                <div class="w-8 h-8 bg-blue-100 text-blue-600 rounded-lg flex items-center justify-center mr-3">
                                    <i class="fas fa-car text-sm"></i>
                                </div>
                                <div>
                                    <p class="font-medium">Tesla Model 3</p>
                                    <p class="text-sm text-gray-500">45 bookings</p>
                                </div>
                            </div>
                            <span class="font-semibold text-green-600">$8,450</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <div class="flex items-center">
                                <div class="w-8 h-8 bg-green-100 text-green-600 rounded-lg flex items-center justify-center mr-3">
                                    <i class="fas fa-motorcycle text-sm"></i>
                                </div>
                                <div>
                                    <p class="font-medium">Honda CBR</p>
                                    <p class="text-sm text-gray-500">38 bookings</p>
                                </div>
                            </div>
                            <span class="font-semibold text-green-600">$6,230</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <div class="flex items-center">
                                <div class="w-8 h-8 bg-purple-100 text-purple-600 rounded-lg flex items-center justify-center mr-3">
                                    <i class="fas fa-bicycle text-sm"></i>
                                </div>
                                <div>
                                    <p class="font-medium">VinFast Klara</p>
                                    <p class="text-sm text-gray-500">32 bookings</p>
                                </div>
                            </div>
                            <span class="font-semibold text-green-600">$4,890</span>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-lg font-semibold mb-4">Recent Activity</h3>
                    <div class="space-y-4">
                        <div class="flex items-start space-x-3">
                            <div class="w-8 h-8 bg-green-100 text-green-600 rounded-full flex items-center justify-center">
                                <i class="fas fa-check text-sm"></i>
                            </div>
                            <div>
                                <p class="text-sm font-medium">New booking confirmed</p>
                                <p class="text-xs text-gray-500">Tesla Model 3 - 2 hours ago</p>
                            </div>
                        </div>
                        <div class="flex items-start space-x-3">
                            <div class="w-8 h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center">
                                <i class="fas fa-user-plus text-sm"></i>
                            </div>
                            <div>
                                <p class="text-sm font-medium">New user registered</p>
                                <p class="text-xs text-gray-500">john@example.com - 4 hours ago</p>
                            </div>
                        </div>
                        <div class="flex items-start space-x-3">
                            <div class="w-8 h-8 bg-yellow-100 text-yellow-600 rounded-full flex items-center justify-center">
                                <i class="fas fa-car text-sm"></i>
                            </div>
                            <div>
                                <p class="text-sm font-medium">Vehicle returned</p>
                                <p class="text-xs text-gray-500">Honda CBR - 6 hours ago</p>
                            </div>
                        </div>
                        <div class="flex items-start space-x-3">
                            <div class="w-8 h-8 bg-red-100 text-red-600 rounded-full flex items-center justify-center">
                                <i class="fas fa-times text-sm"></i>
                            </div>
                            <div>
                                <p class="text-sm font-medium">Booking cancelled</p>
                                <p class="text-xs text-gray-500">VinFast Klara - 8 hours ago</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Stats -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-lg font-semibold mb-4">Quick Stats</h3>
                    <div class="space-y-4">
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Average Booking Value</span>
                            <span class="font-semibold">$89.50</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Peak Hours</span>
                            <span class="font-semibold">2:00 PM - 6:00 PM</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Most Popular Day</span>
                            <span class="font-semibold">Saturday</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Customer Satisfaction</span>
                            <span class="font-semibold text-green-600">4.8/5.0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Return Rate</span>
                            <span class="font-semibold">67%</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Cancellation Rate</span>
                            <span class="font-semibold text-red-600">8.5%</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Detailed Tables -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Monthly Revenue Breakdown -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-lg font-semibold mb-4">Monthly Revenue Breakdown</h3>
                    <div class="overflow-x-auto">
                        <table class="min-w-full">
                            <thead>
                                <tr class="border-b border-gray-200">
                                    <th class="text-left py-2 text-sm font-medium text-gray-500">Month</th>
                                    <th class="text-right py-2 text-sm font-medium text-gray-500">Revenue</th>
                                    <th class="text-right py-2 text-sm font-medium text-gray-500">Bookings</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200">
                                <tr>
                                    <td class="py-2 text-sm text-gray-900">December 2024</td>
                                    <td class="py-2 text-sm text-right font-medium">$12,450</td>
                                    <td class="py-2 text-sm text-right text-gray-500">156</td>
                                </tr>
                                <tr>
                                    <td class="py-2 text-sm text-gray-900">November 2024</td>
                                    <td class="py-2 text-sm text-right font-medium">$11,230</td>
                                    <td class="py-2 text-sm text-right text-gray-500">142</td>
                                </tr>
                                <tr>
                                    <td class="py-2 text-sm text-gray-900">October 2024</td>
                                    <td class="py-2 text-sm text-right font-medium">$9,870</td>
                                    <td class="py-2 text-sm text-right text-gray-500">128</td>
                                </tr>
                                <tr>
                                    <td class="py-2 text-sm text-gray-900">September 2024</td>
                                    <td class="py-2 text-sm text-right font-medium">$8,650</td>
                                    <td class="py-2 text-sm text-right text-gray-500">115</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Vehicle Performance -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-lg font-semibold mb-4">Vehicle Performance</h3>
                    <div class="space-y-4">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="font-medium">Tesla Model 3</p>
                                <p class="text-sm text-gray-500">Electric Car</p>
                            </div>
                            <div class="text-right">
                                <p class="font-semibold">$8,450</p>
                                <p class="text-sm text-gray-500">45 bookings</p>
                            </div>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-primary h-2 rounded-full" style="width: 85%"></div>
                        </div>
                        
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="font-medium">Honda CBR</p>
                                <p class="text-sm text-gray-500">Motorcycle</p>
                            </div>
                            <div class="text-right">
                                <p class="font-semibold">$6,230</p>
                                <p class="text-sm text-gray-500">38 bookings</p>
                            </div>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-green-500 h-2 rounded-full" style="width: 72%"></div>
                        </div>
                        
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="font-medium">VinFast Klara</p>
                                <p class="text-sm text-gray-500">Electric Motorcycle</p>
                            </div>
                            <div class="text-right">
                                <p class="font-semibold">$4,890</p>
                                <p class="text-sm text-gray-500">32 bookings</p>
                            </div>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-yellow-500 h-2 rounded-full" style="width: 58%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div th:replace="~{fragments/footer :: footer}"></div>

    <script>
        // Chart.js integration would go here
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize charts
            console.log('Reports page loaded');
            
            // Date range picker functionality
            const dateInputs = document.querySelectorAll('input[type="date"]');
            dateInputs.forEach(input => {
                input.addEventListener('change', function() {
                    console.log('Date range changed');
                    // Implement date range filtering
                });
            });
            
            // Report type selection
            const reportTypeSelect = document.querySelector('select');
            if (reportTypeSelect) {
                reportTypeSelect.addEventListener('change', function() {
                    console.log('Report type changed to:', this.value);
                    // Implement report type switching
                });
            }
        });
    </script>
</body>
</html>