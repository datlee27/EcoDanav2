<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/layout :: head}"></head>
<body class="bg-gray-50">
    <div th:replace="~{fragments/nav :: nav}"></div>

    <!-- Vehicle Detail Section -->
    <section class="pt-20 pb-8">
        <div class="max-w-7xl mx-auto px-4">
            <!-- Breadcrumb -->
            <nav class="mb-6">
                <ol class="flex items-center space-x-2 text-sm text-gray-500">
                    <li><a th:href="@{/}" class="hover:text-primary">Home</a></li>
                    <li><i class="fas fa-chevron-right text-xs"></i></li>
                    <li><a th:href="@{/vehicles}" class="hover:text-primary">Vehicles</a></li>
                    <li><i class="fas fa-chevron-right text-xs"></i></li>
                    <li class="text-gray-900" th:text="${vehicle.vehicleModel}">Vehicle Model</li>
                </ol>
            </nav>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Vehicle Images -->
                <div class="space-y-4">
                    <div class="main-image h-96 bg-gradient-to-br from-primary to-secondary rounded-xl flex items-center justify-center">
                        <i th:class="${vehicle.vehicleType == 'ElectricCar' ? 'fas fa-car text-8xl text-white' : 
                                     vehicle.vehicleType == 'Motorcycle' ? 'fas fa-motorcycle text-8xl text-white' : 
                                     'fas fa-bicycle text-8xl text-white'}"></i>
                    </div>
                    
                    <!-- Thumbnail images (mock) -->
                    <div class="grid grid-cols-4 gap-2">
                        <div class="h-20 bg-gray-200 rounded-lg flex items-center justify-center">
                            <i class="fas fa-image text-gray-400"></i>
                        </div>
                        <div class="h-20 bg-gray-200 rounded-lg flex items-center justify-center">
                            <i class="fas fa-image text-gray-400"></i>
                        </div>
                        <div class="h-20 bg-gray-200 rounded-lg flex items-center justify-center">
                            <i class="fas fa-image text-gray-400"></i>
                        </div>
                        <div class="h-20 bg-gray-200 rounded-lg flex items-center justify-center">
                            <i class="fas fa-image text-gray-400"></i>
                        </div>
                    </div>
                </div>

                <!-- Vehicle Information -->
                <div class="space-y-6">
                    <div>
                        <h1 class="text-3xl font-bold text-gray-900 mb-2" th:text="${vehicle.vehicleModel}">Vehicle Model</h1>
                        <div class="flex items-center space-x-4">
                            <span th:class="${'px-3 py-1 rounded-full text-sm font-medium ' + 
                                           (vehicle.vehicleType == 'ElectricCar' ? 'bg-blue-100 text-blue-800' : 
                                            vehicle.vehicleType == 'Motorcycle' ? 'bg-green-100 text-green-800' : 
                                            'bg-purple-100 text-purple-800')}" 
                                  th:text="${vehicle.vehicleType}">Type</span>
                            <span th:class="${'px-3 py-1 rounded-full text-sm font-medium ' + 
                                           (vehicle.status == 'Available' ? 'bg-green-100 text-green-800' : 
                                            'bg-red-100 text-red-800')}" 
                                  th:text="${vehicle.status}">Status</span>
                        </div>
                    </div>

                    <!-- Rating -->
                    <div class="flex items-center space-x-2">
                        <div class="stars text-yellow-400">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </div>
                        <span class="text-sm text-gray-500">4.8 (4,485 reviews)</span>
                    </div>

                    <!-- Description -->
                    <div>
                        <h3 class="text-lg font-semibold mb-2">Description</h3>
                        <p class="text-gray-600" th:text="${vehicle.description}">Vehicle description goes here...</p>
                    </div>

                    <!-- Specifications -->
                    <div>
                        <h3 class="text-lg font-semibold mb-4">Specifications</h3>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-user text-primary w-5"></i>
                                <span class="text-sm" th:text="${vehicle.seats} + ' Passengers'">4 Passengers</span>
                            </div>
                            <div class="flex items-center space-x-3">
                                <i th:class="${vehicle.requiresLicense ? 'fas fa-id-card text-primary w-5' : 'fas fa-ban text-primary w-5'}"></i>
                                <span class="text-sm" th:text="${vehicle.requiresLicense ? 'License Required' : 'No License Required'}">License</span>
                            </div>
                            <div class="flex items-center space-x-3" th:if="${vehicle.batteryCapacity != null}">
                                <i class="fas fa-battery-half text-primary w-5"></i>
                                <span class="text-sm" th:text="${vehicle.batteryCapacity} + ' kWh Battery'">Battery</span>
                            </div>
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-tachometer-alt text-primary w-5"></i>
                                <span class="text-sm" th:text="${vehicle.odometer} + ' km'">Odometer</span>
                            </div>
                            <div class="flex items-center space-x-3" th:if="${vehicle.yearManufactured != null}">
                                <i class="fas fa-calendar text-primary w-5"></i>
                                <span class="text-sm" th:text="${vehicle.yearManufactured}">Year</span>
                            </div>
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-tag text-primary w-5"></i>
                                <span class="text-sm" th:text="${vehicle.licensePlate}">License Plate</span>
                            </div>
                        </div>
                    </div>

                    <!-- Pricing -->
                    <div class="bg-gray-50 p-6 rounded-xl">
                        <h3 class="text-lg font-semibold mb-4">Pricing</h3>
                        <div class="space-y-3">
                            <div class="flex justify-between items-center">
                                <span class="text-gray-600">Per Hour</span>
                                <span class="font-semibold" th:text="'$' + ${vehicle.pricePerHour}">$15.00</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-gray-600">Per Day</span>
                                <span class="font-semibold text-lg" th:text="'$' + ${vehicle.pricePerDay}">$89.00</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-gray-600">Per Month</span>
                                <span class="font-semibold" th:text="'$' + ${vehicle.pricePerMonth}">$2,500.00</span>
                            </div>
                        </div>
                    </div>

                    <!-- Booking Form -->
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-lg font-semibold mb-4">Book This Vehicle</h3>
                        <form th:action="@{/book}" method="post" class="space-y-4">
                            <input type="hidden" name="vehicleId" th:value="${vehicle.vehicleId}">
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Pickup Date</label>
                                    <input type="date" name="pickupDate" required 
                                           class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Return Date</label>
                                    <input type="date" name="returnDate" required 
                                           class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                                </div>
                            </div>

                            <div th:if="${session.currentUser == null}" class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                                <div class="flex items-center">
                                    <i class="fas fa-exclamation-triangle text-yellow-600 mr-2"></i>
                                    <span class="text-sm text-yellow-800">You need to <a th:href="@{/login}" class="text-primary hover:underline">login</a> to book this vehicle.</span>
                                </div>
                            </div>

                            <button type="submit" 
                                    th:disabled="${session.currentUser == null}"
                                    th:class="${session.currentUser == null ? 'w-full bg-gray-400 text-white py-3 rounded-lg cursor-not-allowed' : 'w-full bg-primary text-white py-3 rounded-lg hover:bg-accent transition-colors'}"
                                    th:text="${session.currentUser == null ? 'Login Required' : 'Book Now'}">
                                Book Now
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="py-12 bg-white">
        <div class="max-w-7xl mx-auto px-4">
            <h2 class="text-2xl font-bold text-gray-900 mb-8">Vehicle Features</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                <div class="text-center">
                    <div class="w-12 h-12 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-2">
                        <i class="fas fa-snowflake"></i>
                    </div>
                    <span class="text-sm text-gray-600">Air Conditioning</span>
                </div>
                <div class="text-center">
                    <div class="w-12 h-12 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-2">
                        <i class="fas fa-music"></i>
                    </div>
                    <span class="text-sm text-gray-600">Bluetooth</span>
                </div>
                <div class="text-center">
                    <div class="w-12 h-12 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-2">
                        <i class="fas fa-map-marker-alt"></i>
                    </div>
                    <span class="text-sm text-gray-600">GPS Navigation</span>
                </div>
                <div class="text-center">
                    <div class="w-12 h-12 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-2">
                        <i class="fas fa-usb"></i>
                    </div>
                    <span class="text-sm text-gray-600">USB Charging</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Reviews Section -->
    <section class="py-12 bg-gray-50">
        <div class="max-w-7xl mx-auto px-4">
            <h2 class="text-2xl font-bold text-gray-900 mb-8">Customer Reviews</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <div class="flex items-center mb-4">
                        <div class="w-10 h-10 bg-gray-300 rounded-full mr-3"></div>
                        <div>
                            <h4 class="font-semibold">John Doe</h4>
                            <div class="stars text-yellow-400 text-sm">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </div>
                        </div>
                    </div>
                    <p class="text-gray-600">"Great vehicle, very comfortable and easy to drive. The booking process was smooth and the customer service was excellent."</p>
                </div>
                
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <div class="flex items-center mb-4">
                        <div class="w-10 h-10 bg-gray-300 rounded-full mr-3"></div>
                        <div>
                            <h4 class="font-semibold">Jane Smith</h4>
                            <div class="stars text-yellow-400 text-sm">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </div>
                        </div>
                    </div>
                    <p class="text-gray-600">"Perfect for city driving. The vehicle was clean and well-maintained. I would definitely book again!"</p>
                </div>
            </div>
        </div>
    </section>

    <div th:replace="~{fragments/footer :: footer}"></div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Set minimum date to today
            const today = new Date().toISOString().split('T')[0];
            const pickupDateInput = document.querySelector('input[name="pickupDate"]');
            const returnDateInput = document.querySelector('input[name="returnDate"]');
            
            if (pickupDateInput) {
                pickupDateInput.min = today;
            }
            
            if (returnDateInput) {
                returnDateInput.min = today;
            }
            
            // Validate return date is after pickup date
            if (pickupDateInput && returnDateInput) {
                pickupDateInput.addEventListener('change', function() {
                    returnDateInput.min = this.value;
                });
            }
        });
    </script>
</body>
</html>